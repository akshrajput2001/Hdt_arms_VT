<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <!-- reflect: should be either 1 or -1, and can be multiplied to negate a side -->
  <!--          the left:1, right:-1 mapping is the same as for PR2 (and works with the standard y axis) -->
  <xacro:macro name="hdt_saffir_hand" params="reflect parent_link namespace motor_base_id *origin">
    <!-- palm -->
    <joint name="${namespace}palm" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${namespace}${parent_link}"/>
      <child link="${namespace}palm"/>
    </joint>

    <link name="${namespace}palm">
      <!--<collision>
        <origin xyz="0 0 -0.6" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_palm.STL"/>
        </geometry>
      </collision>-->

      <visual>
        <origin xyz="0 0 0.0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_palm.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0 -0.08326 -0.00539" rpy="0 0 0"/>
        <mass value="0.56756"/>
        <inertia
            ixx="0.001727803" ixy="0.000001205" ixz="0.0"
            iyy="0.000549457" iyz="-0.000101997"
            izz="0.001418031"/>
        <!-- <inertia -->
        <!--     ixx="0.01727803" ixy="0.00001205" ixz="0.0" -->
        <!--     iyy="0.00549457" iyz="-0.00101997" -->
        <!--     izz="0.01418031"/> -->
      </inertial>
    </link>

    <!-- thumb base -->
    <joint name="${namespace}thumb_base" type="revolute">
      <hdt id="${motor_base_id + 0}" kmin="10" kmax="20" inertia="0.01"/>
      <axis xyz="0 ${reflect * 1} 0"/>
      <limit effort="4.0" lower="-1.5708" upper="1.5708" velocity="4.1888"/>
      <origin xyz="0 -0.05039 0.01529" rpy="0 0 0"/>
      <parent link="${namespace}palm"/>
      <child link="${namespace}thumb_base"/>
      <dynamics damping="0.7" friction="0.01"/>
    </joint>

    <transmission name="${namespace}tran10">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${namespace}thumb_base">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="${namespace}motor10">
        <mechanicalReduction>1</mechanicalReduction>
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </actuator>
    </transmission>

    <link name="${namespace}thumb_base">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_base.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_base.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0 -0.02653 0.02207" rpy="0 0 0"/>
        <mass value="0.08562"/>
        <!-- <inertia -->
        <!--     ixx="0.0000315" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000034299" iyz="0.0" -->
        <!--     izz="0.000022344"/> -->
        <inertia
            ixx="0.000315" ixy="0.0" ixz="0.0"
            iyy="0.00034299" iyz="0.0"
            izz="0.00022344"/>
      </inertial>
    </link>

    <!-- thumb prox -->
    <joint name="${namespace}thumb_prox" type="revolute">
      <hdt id="${motor_base_id + 1}" kmin="10" kmax="20" inertia="0.01"/>
      <axis xyz="1 0 0"/>
      <limit effort="4.0" lower="-0.1" upper="2.1" velocity="4.1888"/>
      <origin xyz="0.00214 -0.02759 0.05700" rpy="0 0 0"/>
      <parent link="${namespace}thumb_base"/>
      <child link="${namespace}thumb_prox"/>
      <dynamics damping="0.7" friction="0.01"/>
    </joint>

    <transmission name="${namespace}tran11">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${namespace}thumb_prox">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="${namespace}motor11">
        <mechanicalReduction>1</mechanicalReduction>
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </actuator>
    </transmission>

    <link name="${namespace}thumb_prox">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_prox.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_prox.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0 0.001 0.02063" rpy="0 0 0"/>
        <mass value="0.02523"/>
        <!-- <inertia -->
        <!--     ixx="0.000004718" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000005374" iyz="-0.000000071" -->
        <!--     izz="0.000002921"/> -->
        <inertia
            ixx="0.0004718" ixy="0.0" ixz="0.0"
            iyy="0.0005374" iyz="-0.0000071"
            izz="0.0002921"/>
      </inertial>
    </link>

    <!-- thumb med -->
    <joint name="${namespace}thumb_med" type="fixed">
      <origin xyz="0 0.00285 0.04341" rpy="0 0 0"/>
      <parent link="${namespace}thumb_prox"/>
      <child link="${namespace}thumb_med"/>
    </joint>

    <link name="${namespace}thumb_med">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_med.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_med.STL"/>
        </geometry>
        <material name="black"/>
      </visual>

      <inertial>
        <origin xyz="0 -0.00353 0.01162" rpy="0 0 0"/>
        <mass value="0.0085"/>
        <!-- <inertia -->
        <!--     ixx="0.000001099" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000001639" iyz="0.000000096" -->
        <!--     izz="0.000000981"/> -->
        <inertia
            ixx="0.0001099" ixy="0.0" ixz="0.0"
            iyy="0.0001639" iyz="0.0000096"
            izz="0.0000981"/>
      </inertial>
    </link>

    <!-- thumb dist -->
    <joint name="${namespace}thumb_dist" type="fixed">
      <origin xyz="0 -0.0009 0.02769" rpy="0 0 0"/>
      <parent link="${namespace}thumb_med"/>
      <child link="${namespace}thumb_dist"/>
    </joint>

    <link name="${namespace}thumb_dist">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_dist.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_thumb_dist.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0 -0.00131 0.01323" rpy="0 0 0"/>
        <mass value="0.0092"/>
        <!-- <inertia -->
        <!--     ixx="0.00000066" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000000837" iyz="0.0" -->
        <!--     izz="0.000000695"/> -->
        <inertia
            ixx="0.00066" ixy="0.0" ixz="0.0"
            iyy="0.000837" iyz="0.0"
            izz="0.000695"/>
      </inertial>
    </link>

    <!-- index prox -->
    <joint name="${namespace}index_prox" type="revolute">
      <hdt id="${motor_base_id + 2}" kmin="10" kmax="20" inertia="0.01"/>
      <axis xyz="0 0 1"/>
      <limit effort="4.0" lower="-0.1" upper="2.3" velocity="4.1888"/>
      <origin xyz="0 -0.16325 0.02701" rpy="0 ${(reflect + 1) / 2 * M_PI} 0"/>
      <parent link="${namespace}palm"/>
      <child link="${namespace}index_prox"/>
      <dynamics damping="0.7" friction="0.01"/>
    </joint>

    <transmission name="${namespace}tran12">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${namespace}index_prox">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="${namespace}motor12">
        <mechanicalReduction>1</mechanicalReduction>
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </actuator>
    </transmission>

    <link name="${namespace}index_prox">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_prox.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_prox.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="-0.001 -0.02063 0" rpy="0 0 0"/>
        <mass value="0.02523"/>
        <!-- <inertia -->
        <!--     ixx="0.000005374" ixy="-0.000000071" ixz="0.0" -->
        <!--     iyy="0.000002921" iyz="0.0" -->
        <!--     izz="0.000004718"/> -->
        <inertia
            ixx="0.0005374" ixy="-0.0000071" ixz="0.0"
            iyy="0.0002921" iyz="0.0"
            izz="0.0004718"/>
      </inertial>
    </link>

    <!-- index med -->
    <joint name="${namespace}index_med" type="fixed">
      <origin xyz="-0.00285 -0.04341 0" rpy="0 0 0"/>
      <parent link="${namespace}index_prox"/>
      <child link="${namespace}index_med"/>
    </joint>

    <link name="${namespace}index_med">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_med.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_med.STL"/>
        </geometry>
        <material name="black"/>
      </visual>

      <inertial>
        <origin xyz="0.00353 -0.01162 0" rpy="0 0 0"/>
        <mass value="0.0085"/>
        <!-- <inertia -->
        <!--     ixx="0.000001639" ixy="0.000000096" ixz="0.0" -->
        <!--     iyy="0.000000981" iyz="0.0" -->
        <!--     izz="0.000001099"/> -->
        <inertia
            ixx="0.0001639" ixy="0.0000096" ixz="0.0"
            iyy="0.0000981" iyz="0.0"
            izz="0.0001099"/>
      </inertial>
    </link>

    <!-- index dist -->
    <joint name="${namespace}index_dist" type="fixed">
      <origin xyz="0.0009 -0.02769 0" rpy="0 0 0"/>
      <parent link="${namespace}index_med"/>
      <child link="${namespace}index_dist"/>
    </joint>

    <link name="${namespace}index_dist">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_dist.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_index_dist.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0.00131 -0.01323 0" rpy="0 0 0"/>
        <mass value="0.0092"/>
        <!-- <inertia -->
        <!--     ixx="0.000000837" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000000695" iyz="0.0" -->
        <!--     izz="0.00000066"/> -->
        <inertia
            ixx="0.000837" ixy="0.0" ixz="0.0"
            iyy="0.0000695" iyz="0.0"
            izz="0.000066"/>
      </inertial>
      <origin xyz="0 -0.08326 -0.00539" rpy="0 0 0"/>
    </link>

    <!-- ring prox -->
    <joint name="${namespace}ring_prox" type="revolute">
      <hdt id="${motor_base_id + 3}" kmin="10" kmax="20" inertia="0.01"/>
      <axis xyz="0 0 1"/>
      <limit effort="4.0" lower="-0.1" upper="2.3" velocity="4.1888"/>
      <origin xyz="0 -0.16325 -0.02701" rpy="0 ${(reflect + 1) / 2 * M_PI} 0"/>
      <parent link="${namespace}palm"/>
      <child link="${namespace}ring_prox"/>
      <dynamics damping="0.7" friction="0.01"/>
    </joint>

    <transmission name="${namespace}tran13">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="${namespace}ring_prox">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="${namespace}motor13">
        <mechanicalReduction>1</mechanicalReduction>
        <hardwareInterface>hardware_interface/EffortJointInterfaceyy</hardwareInterface>
      </actuator>
    </transmission>

    <link name="${namespace}ring_prox">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_prox.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_prox.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="-0.001 -0.02063 0" rpy="0 0 0"/>
        <mass value="0.02523"/>
        <!-- <inertia -->
        <!--     ixx="0.000005374" ixy="-0.000000071" ixz="0.0" -->
        <!--     iyy="0.000002921" iyz="0.0" -->
        <!--     izz="0.000004718"/> -->
        <inertia
            ixx="0.0005374" ixy="-0.0000071" ixz="0.0"
            iyy="0.0002921" iyz="0.0"
            izz="0.0004718"/>
      </inertial>
    </link>

    <!-- ring med -->
    <joint name="${namespace}ring_med" type="fixed">
      <origin xyz="-0.00285 -0.04341 0" rpy="0 0 0"/>
      <parent link="${namespace}ring_prox"/>
      <child link="${namespace}ring_med"/>
    </joint>

    <link name="${namespace}ring_med">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_med.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_med.STL"/>
        </geometry>
        <material name="black"/>
      </visual>

      <inertial>
        <origin xyz="0.00353 -0.01162 0" rpy="0 0 0"/>
        <mass value="0.0085"/>
        <!-- <inertia -->
        <!--     ixx="0.000001639" ixy="0.000000096" ixz="0.0" -->
        <!--     iyy="0.000000981" iyz="0.0" -->
        <!--     izz="0.000001099"/> -->
        <inertia
            ixx="0.0001639" ixy="0.0000096" ixz="0.0"
            iyy="0.0000981" iyz="0.0"
            izz="0.0001099"/>
      </inertial>
    </link>

    <!-- ring dist -->
    <joint name="${namespace}ring_dist" type="fixed">
      <origin xyz="0.0009 -0.02769 0" rpy="0 0 0"/>
      <parent link="${namespace}ring_med"/>
      <child link="${namespace}ring_dist"/>
    </joint>

    <link name="${namespace}ring_dist">
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_dist.STL"/>
        </geometry>
      </collision>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://hdt_saffir_description/meshes/hdt_6dof_ring_dist.STL"/>
        </geometry>
        <material name="orange"/>
      </visual>

      <inertial>
        <origin xyz="0.00131 -0.01323 0" rpy="0 0 0"/>
        <mass value="0.0092"/>
        <!-- <inertia -->
        <!--     ixx="0.000000837" ixy="0.0" ixz="0.0" -->
        <!--     iyy="0.000000695" iyz="0.0" -->
        <!--     izz="0.00000066"/> -->
        <inertia
            ixx="0.000837" ixy="0.0" ixz="0.0"
            iyy="0.000695" iyz="0.0"
            izz="0.00066"/>
      </inertial>
    </link>
  </xacro:macro>
</robot>
